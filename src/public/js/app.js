// Generated by CoffeeScript 1.9.1
(function() {
  var app,
    indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  app = angular.module('laserMaze', []);

  app.controller('boardController', function($scope) {
    var i, j;
    $scope.player = {
      name: 'alonso',
      pos: {
        x: 4,
        y: 5
      },
      move: function(dir) {
        var speed;
        speed = dir === "up" || dir === "left" ? -1 : 1;
        if (dir === "up" || dir === "down") {
          return this.pos.y += speed;
        } else if (dir === "left" || dir === "right") {
          return this.pos.x += speed;
        } else {
          throw new Error("Invalid move");
        }
      }
    };
    $scope.board = (function() {
      var k, results;
      results = [];
      for (j = k = 1; k <= 9; j = ++k) {
        results.push((function() {
          var l, results1;
          results1 = [];
          for (i = l = 1; l <= 9; i = ++l) {
            results1.push(true);
          }
          return results1;
        })());
      }
      return results;
    })();
    $scope.board[$scope.player.pos.y][$scope.player.pos.x] = $scope.player;
    return $scope.keyPressed = function(e) {
      var numberToText;
      numberToText = {
        37: 'left',
        38: 'up',
        39: 'right',
        40: 'down'
      };
      if (indexOf.call(numberToText, e) < 0) {
        return;
      }
      $scope.board[$scope.player.pos.y][$scope.player.pos.x] = true;
      $scope.player.move(numberToText[e.which]);
      return $scope.board[$scope.player.pos.y][$scope.player.pos.x] = $scope.player;
    };
  });

  app.directive('shortcut', function() {
    var instance;
    return instance = {
      restrict: 'A',
      replace: true,
      scope: true,
      link: function(scope, iElement, iAttrs) {
        return jQuery(document).on('keydown', function(e) {
          return scope.$apply(scope.keyPressed(e));
        });
      }
    };
  });

}).call(this);
